<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>ä»¥å¤ªåŠ-Transaction | haiki</title>
  <meta name="keywords" content=" ä»¥å¤ªåŠ , transaction ">
  <meta name="description" content="ä»¥å¤ªåŠ-Transaction | haiki">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="Oopsï½ï¼Œæˆ‘å´©æºƒäº†ï¼æ‰¾ä¸åˆ°ä½ æƒ³è¦çš„é¡µé¢ :(">
<meta property="og:type" content="website">
<meta property="og:title" content="404">
<meta property="og:url" content="https://github.com/haiki/haiki.github.io/404.html">
<meta property="og:site_name" content="haiki">
<meta property="og:description" content="Oopsï½ï¼Œæˆ‘å´©æºƒäº†ï¼æ‰¾ä¸åˆ°ä½ æƒ³è¦çš„é¡µé¢ :(">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2019-10-03T12:16:10.000Z">
<meta property="article:modified_time" content="2022-01-03T11:20:49.316Z">
<meta property="article:author" content="haiki">
<meta property="article:tag" content="computer science,blockchain,leetcode,record life">
<meta name="twitter:card" content="summary">


<link rel="icon" href="/img/avatar.jpg">

<link href="/css/style.css?v=1.1.0" rel="stylesheet">

<link href="/css/hl_theme/atom-light.css?v=1.1.0" rel="stylesheet">

<link href="//cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" rel="stylesheet">

<script src="//cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script src="/js/titleTip.js?v=1.1.0" ></script>

<script src="//cdn.jsdelivr.net/npm/highlightjs@9.16.2/highlight.pack.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script>



<script src="//cdn.jsdelivr.net/npm/jquery.cookie@1.4.1/jquery.cookie.min.js" ></script>

<script src="/js/iconfont.js?v=1.1.0" ></script>

<meta name="generator" content="Hexo 6.0.0"></head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value="">
  <input class="theme_blog_path" value="">
  <input id="theme_shortcut" value="true" />
  <input id="theme_highlight_on" value="true" />
  <input id="theme_code_copy" value="true" />
</div>



<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/"
   class="avatar_target">
    <img class="avatar"
         src="/img/avatar.jpg"/>
</a>
<div class="author">
    <span>haiki</span>
</div>

<div class="icon">
    
        
            <a title="rss"
               href="/atom.xml"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-rss"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="github"
               href="https://github.com/yelog"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-github"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="facebook"
               href="https://www.facebook.com/faker.tops"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-facebook"></use>
                    </svg>
                
            </a>
        
    
        
    
        
    
        
            <a title="instagram"
               href="https://www.facebook.com/faker.tops"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-instagram"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="reddit"
               href="https://www.reddit.com/user/yelog/"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-reddit"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="weibo"
               href="http://weibo.com/u/2307534817"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-weibo"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="jianshu"
               href="https://www.jianshu.com/u/ff56736de7cf"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-jianshu"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="zhihu"
               href="https://www.zhihu.com/people/jaytp/activities"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-zhihu"></use>
                    </svg>
                
            </a>
        
    
        
    
        
            <a title="oschina"
               href="https://my.oschina.net/yelog"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-oschina"></use>
                    </svg>
                
            </a>
        
    
        
    
        
            <a title="email"
               href="mailto:jaytp@qq.com"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-email"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="qq"
               href="http://wpa.qq.com/msgrd?v=3&uin=872336115&site=qq&menu=yes"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-qq"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="kugou"
               href="https://www.kugou.com/"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-kugou"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="neteasemusic"
               href="https://music.163.com/#/user/home?id=88151013"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-neteasemusic"></use>
                    </svg>
                
            </a>
        
    
</div>




<ul>
    <li>
        <div class="all active" data-rel="All">All
            
                <small>(24)</small>
            
        </div>
    </li>
    
        
            
                <li>
                    <div data-rel="è¯»ä¹¦">
                        
                        è¯»ä¹¦
                        <small>(1)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="å·¥å…·">
                        
                        å·¥å…·
                        <small>(2)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="è¿ç»´">
                        
                        è¿ç»´
                        <small>(1)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="ç¼–ç¨‹è¯­è¨€">
                        
                        ç¼–ç¨‹è¯­è¨€
                        <small>(3)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="è®ºæ–‡ç›¸å…³æ€»ç»“">
                        
                        è®ºæ–‡ç›¸å…³æ€»ç»“
                        <small>(3)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="åŒºå—é“¾">
                        
                        åŒºå—é“¾
                        <small>(9)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="leetcode">
                        
                        leetcode
                        <small>(4)</small>
                        
                    </div>
                    
                </li>
            
        
    
</ul>
<div class="left-bottom">
    <div class="menus">
        
            
            
            
    </div>
    <div>
        
            <a class="about  hasFriend  site_url"
               
               href="/about">About</a>
        
        <a style="width: 50%"
                
                                           class="friends">Friends</a>
        
    </div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="24">

<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        Links
        <i class="iconfont icon-left"></i>
    </div>
    <div class="friends-content">
        <ul>
            
            <li><a target="_blank" href="http://yelog.org/">å¶è½é˜</a></li>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <div class="right-top">
        <div id="default-panel">
            <i class="iconfont icon-search" data-title="æœç´¢ å¿«æ·é”® i"></i>
            <div class="right-title">All</div>
            <i class="iconfont icon-file-tree" data-title="åˆ‡æ¢åˆ°å¤§çº²è§†å›¾ å¿«æ·é”® w"></i>
        </div>
        <div id="search-panel">
            <i class="iconfont icon-left" data-title="è¿”å›"></i>
            <input id="local-search-input" autocomplete="off"/>
            <label class="border-line" for="input"></label>
            <i class="iconfont icon-case-sensitive" data-title="å¤§å°å†™æ•æ„Ÿ"></i>
            <i class="iconfont icon-tag" data-title="æ ‡ç­¾"></i>
        </div>
        <div id="outline-panel" style="display: none">
            <div class="right-title">å¤§çº²</div>
            <i class="iconfont icon-list" data-title="åˆ‡æ¢åˆ°æ–‡ç« åˆ—è¡¨"></i>
        </div>
    </div>

    <div class="tags-list">
    <input id="tag-search" />
    <div class="tag-wrapper">
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>å·¥å…·æˆé•¿ç±»</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>é›¶ç¢</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>è·¯ç”±ç®—æ³•</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>å‘½ä»¤</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>ç§é“¾</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>ç®—æ³•</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>ä»¥å¤ªåŠ</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>è¯­æ³•</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>æ™ºèƒ½åˆçº¦</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>API</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>attack</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>C++</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>DApp</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>easy</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>ethereum</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>geth</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>goç¯å¢ƒé…ç½®</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>hexo</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>IDEA</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>java</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Javascript</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>linkedList</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>linux</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>payment routing</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>problem</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>python</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>solidity</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>speedymurmurs</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>stack</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>string</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>token</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>transaction</a>
            </li>
        
    </div>

</div>

    
    <nav id="title-list-nav">
        
        <a id="top" class="All å·¥å…· "
           href="/2019/10/03/my-first-article/"
           data-tag="hexo,problem"
           data-author="" >
            <span class="post-title" title="my first article">my first article</span>
            <span class="post-date" title="2019-10-03 16:03:38">2019/10/03</span>
        </a>
        
        <a  class="All "
           href="/2022/01/03/try/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="try">try</span>
            <span class="post-date" title="2022-01-03 20:17:56">2022/01/03</span>
        </a>
        
        <a  class="All ç¼–ç¨‹è¯­è¨€ "
           href="/2019/12/24/python/"
           data-tag="python,è¯­æ³•"
           data-author="" >
            <span class="post-title" title="python">python</span>
            <span class="post-date" title="2019-12-24 22:10:19">2019/12/24</span>
        </a>
        
        <a  class="All åŒºå—é“¾ "
           href="/2019/12/23/%E4%BB%A5%E5%A4%AA%E5%9D%8AERC20/"
           data-tag="ä»¥å¤ªåŠ,solidity,æ™ºèƒ½åˆçº¦,token"
           data-author="" >
            <span class="post-title" title="ä»¥å¤ªåŠERC20">ä»¥å¤ªåŠERC20</span>
            <span class="post-date" title="2019-12-23 10:13:29">2019/12/23</span>
        </a>
        
        <a  class="All åŒºå—é“¾ "
           href="/2019/12/22/%E4%BB%A5%E5%A4%AA%E5%9D%8A-Transaction/"
           data-tag="ä»¥å¤ªåŠ,transaction"
           data-author="" >
            <span class="post-title" title="ä»¥å¤ªåŠ-Transaction">ä»¥å¤ªåŠ-Transaction</span>
            <span class="post-date" title="2019-12-22 10:55:27">2019/12/22</span>
        </a>
        
        <a  class="All åŒºå—é“¾ "
           href="/2019/12/12/%E4%BB%A5%E5%A4%AA%E5%9D%8A%E7%A7%91%E6%99%AE/"
           data-tag="ethereum"
           data-author="" >
            <span class="post-title" title="ä»¥å¤ªåŠç§‘æ™®">ä»¥å¤ªåŠç§‘æ™®</span>
            <span class="post-date" title="2019-12-12 09:29:40">2019/12/12</span>
        </a>
        
        <a  class="All ç¼–ç¨‹è¯­è¨€ "
           href="/2019/11/29/C-%E9%9A%8F%E8%AE%B0/"
           data-tag="C++"
           data-author="" >
            <span class="post-title" title="C++éšè®°">C++éšè®°</span>
            <span class="post-date" title="2019-11-29 09:58:19">2019/11/29</span>
        </a>
        
        <a  class="All åŒºå—é“¾ "
           href="/2019/11/05/%E5%8C%BA%E5%9D%97%E9%93%BE%E7%9B%B8%E5%85%B3%E6%8A%80%E6%9C%AF%E5%89%8D%E6%B2%BF%E6%B4%9E%E5%AF%9F/"
           data-tag="é›¶ç¢"
           data-author="" >
            <span class="post-title" title="åŒºå—é“¾ç›¸å…³æŠ€æœ¯å‰æ²¿æ´å¯Ÿ">åŒºå—é“¾ç›¸å…³æŠ€æœ¯å‰æ²¿æ´å¯Ÿ</span>
            <span class="post-date" title="2019-11-05 14:54:48">2019/11/05</span>
        </a>
        
        <a  class="All leetcode "
           href="/2019/11/03/%E7%AE%97%E6%B3%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%AD%A6%E4%B9%A0%E5%BF%85%E5%A4%87/"
           data-tag="ç®—æ³•"
           data-author="" >
            <span class="post-title" title="ç®—æ³•ä¸æ•°æ®ç»“æ„å­¦ä¹ å¿…å¤‡">ç®—æ³•ä¸æ•°æ®ç»“æ„å­¦ä¹ å¿…å¤‡</span>
            <span class="post-date" title="2019-11-03 09:34:47">2019/11/03</span>
        </a>
        
        <a  class="All è®ºæ–‡ç›¸å…³æ€»ç»“ "
           href="/2019/10/31/SpeedyMurmurs-data-%E8%AE%B0%E5%BD%95/"
           data-tag="speedymurmurs,payment routing,è·¯ç”±ç®—æ³•"
           data-author="" >
            <span class="post-title" title="SpeedyMurmurs data è®°å½•">SpeedyMurmurs data è®°å½•</span>
            <span class="post-date" title="2019-10-31 10:34:05">2019/10/31</span>
        </a>
        
        <a  class="All åŒºå—é“¾ "
           href="/2019/10/26/%E4%BB%A5%E5%A4%AA%E5%9D%8ADApp/"
           data-tag="ethereum,DApp"
           data-author="" >
            <span class="post-title" title="ä»¥å¤ªåŠDApp">ä»¥å¤ªåŠDApp</span>
            <span class="post-date" title="2019-10-26 18:55:09">2019/10/26</span>
        </a>
        
        <a  class="All åŒºå—é“¾ "
           href="/2019/10/26/%E5%8C%BA%E5%9D%97%E9%93%BE%E4%B8%AD%E7%9A%84%E4%B8%80%E4%BA%9B%E5%B8%B8%E7%94%A8%E5%90%8D%E8%AF%8D%E8%A7%A3%E9%87%8A/"
           data-tag="attack"
           data-author="" >
            <span class="post-title" title="åŒºå—é“¾ä¸­çš„ä¸€äº›å¸¸ç”¨åè¯è§£é‡Š">åŒºå—é“¾ä¸­çš„ä¸€äº›å¸¸ç”¨åè¯è§£é‡Š</span>
            <span class="post-date" title="2019-10-26 18:44:34">2019/10/26</span>
        </a>
        
        <a  class="All åŒºå—é“¾ "
           href="/2019/10/25/%E4%BB%A5%E5%A4%AA%E5%9D%8A%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E5%AE%9E%E8%B7%B5/"
           data-tag="ä»¥å¤ªåŠ,solidity,æ™ºèƒ½åˆçº¦"
           data-author="" >
            <span class="post-title" title="ä»¥å¤ªåŠæ™ºèƒ½åˆçº¦å®è·µ">ä»¥å¤ªåŠæ™ºèƒ½åˆçº¦å®è·µ</span>
            <span class="post-date" title="2019-10-25 10:15:12">2019/10/25</span>
        </a>
        
        <a  class="All åŒºå—é“¾ "
           href="/2019/10/22/%E4%BB%A5%E5%A4%AA%E5%9D%8A%E6%A6%82%E5%BF%B5%E5%8F%8AAPI%E7%9A%84%E6%95%B4%E5%90%88%E4%B8%8E%E7%90%86%E8%A7%A3/"
           data-tag="ä»¥å¤ªåŠ,API,Javascript"
           data-author="" >
            <span class="post-title" title="ä»¥å¤ªåŠæ¦‚å¿µåŠAPIçš„æ•´åˆä¸ç†è§£">ä»¥å¤ªåŠæ¦‚å¿µåŠAPIçš„æ•´åˆä¸ç†è§£</span>
            <span class="post-date" title="2019-10-22 17:21:16">2019/10/22</span>
        </a>
        
        <a  class="All åŒºå—é“¾ "
           href="/2019/10/19/%E4%BB%8E%E5%A4%B4%E6%90%AD%E5%BB%BA%E4%BB%A5%E5%A4%AA%E5%9D%8A%E7%A7%81%E9%93%BE/"
           data-tag="ä»¥å¤ªåŠ,ç§é“¾,geth,goç¯å¢ƒé…ç½®"
           data-author="" >
            <span class="post-title" title="ä»å¤´æ­å»ºä»¥å¤ªåŠç§é“¾">ä»å¤´æ­å»ºä»¥å¤ªåŠç§é“¾</span>
            <span class="post-date" title="2019-10-19 16:15:54">2019/10/19</span>
        </a>
        
        <a  class="All è®ºæ–‡ç›¸å…³æ€»ç»“ "
           href="/2019/10/16/speedyMurmurs%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90Dynamic%E9%83%A8%E5%88%86/"
           data-tag="speedymurmurs,payment routing,è·¯ç”±ç®—æ³•"
           data-author="" >
            <span class="post-title" title="speedyMurmursæºç åˆ†æDynamicéƒ¨åˆ†">speedyMurmursæºç åˆ†æDynamicéƒ¨åˆ†</span>
            <span class="post-date" title="2019-10-16 09:27:00">2019/10/16</span>
        </a>
        
        <a  class="All è®ºæ–‡ç›¸å…³æ€»ç»“ "
           href="/2019/10/11/speedyMurmurs%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"
           data-tag="speedymurmurs,payment routing,è·¯ç”±ç®—æ³•"
           data-author="" >
            <span class="post-title" title="speedyMurmursæºç åˆ†æ">speedyMurmursæºç åˆ†æ</span>
            <span class="post-date" title="2019-10-11 20:12:57">2019/10/11</span>
        </a>
        
        <a  class="All è¿ç»´ "
           href="/2019/10/10/linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"
           data-tag="linux,å‘½ä»¤"
           data-author="" >
            <span class="post-title" title="linuxå¸¸ç”¨å‘½ä»¤">linuxå¸¸ç”¨å‘½ä»¤</span>
            <span class="post-date" title="2019-10-10 16:32:59">2019/10/10</span>
        </a>
        
        <a  class="All ç¼–ç¨‹è¯­è¨€ "
           href="/2019/10/10/java/"
           data-tag="java"
           data-author="" >
            <span class="post-title" title="java">java</span>
            <span class="post-date" title="2019-10-10 14:04:57">2019/10/10</span>
        </a>
        
        <a  class="All å·¥å…· "
           href="/2019/10/09/IDEA%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD/"
           data-tag="IDEA,java"
           data-author="" >
            <span class="post-title" title="IDEAçš„ä½¿ç”¨ï¼šæå‡çœ‹æºç æ•ˆç‡">IDEAçš„ä½¿ç”¨ï¼šæå‡çœ‹æºç æ•ˆç‡</span>
            <span class="post-date" title="2019-10-09 20:21:52">2019/10/09</span>
        </a>
        
        <a  class="All è¯»ä¹¦ "
           href="/2019/10/06/%E9%9D%9E%E6%9A%B4%E5%8A%9B%E6%B2%9F%E9%80%9A%E6%91%98%E5%BD%95%E5%8F%8A%E8%A7%82%E5%90%8E%E6%84%9F/"
           data-tag="å·¥å…·æˆé•¿ç±»"
           data-author="" >
            <span class="post-title" title="éæš´åŠ›æ²Ÿé€šæ‘˜å½•åŠè§‚åæ„Ÿ">éæš´åŠ›æ²Ÿé€šæ‘˜å½•åŠè§‚åæ„Ÿ</span>
            <span class="post-date" title="2019-10-06 18:41:57">2019/10/06</span>
        </a>
        
        <a  class="All leetcode "
           href="/2019/10/05/string-problems-easy/"
           data-tag="easy,string"
           data-author="" >
            <span class="post-title" title="string-problems-easy">string-problems-easy</span>
            <span class="post-date" title="2019-10-05 10:30:38">2019/10/05</span>
        </a>
        
        <a  class="All leetcode "
           href="/2019/08/28/LinkedList-problems-easy/"
           data-tag="linkedList,easy"
           data-author="" >
            <span class="post-title" title="LinkedList-problems-easy">LinkedList-problems-easy</span>
            <span class="post-date" title="2019-08-28 21:40:38">2019/08/28</span>
        </a>
        
        <a  class="All leetcode "
           href="/2019/08/23/stack-problems-easy/"
           data-tag="easy,stack"
           data-author="" >
            <span class="post-title" title="stack-problems-easy">stack-problems-easy</span>
            <span class="post-date" title="2019-08-23 21:40:38">2019/08/23</span>
        </a>
        
        <div id="no-item-tips">

        </div>
    </nav>
    <div id="outline-list">
    </div>
</div>

    </div>
    <div class="hide-list">
        <div class="semicircle" data-title="åˆ‡æ¢å…¨å± å¿«æ·é”® s">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div id="post">
    <div class="pjax">
        <article id="post-ä»¥å¤ªåŠ-Transaction" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">ä»¥å¤ªåŠ-Transaction</h1>
    
    <div class="article-meta">
        
        
        
        <span class="book">
            <i class="iconfont icon-category"></i>
            
            
            <a  data-rel="åŒºå—é“¾">åŒºå—é“¾</a>
            
        </span>
        
        
        <span class="tag">
            <i class="iconfont icon-tag"></i>
            
            <a class="color4">ä»¥å¤ªåŠ</a>
            
            <a class="color2">transaction</a>
            
        </span>
        
    </div>
    <div class="article-meta">
        
            Created At : <time class="date" title='Updated At: 2022-01-03 19:20:49'>2019-12-22 10:55</time>
        
    </div>
    <div class="article-meta">
        
        
        <span id="busuanzi_container_page_pv">
            Views ğŸ‘€ :<span id="busuanzi_value_page_pv">
                <span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </span>
        </span>
        
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%A4%E6%98%93%E5%AE%9A%E4%B9%89"><span class="toc-text">äº¤æ˜“å®šä¹‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%A4%E6%98%93%E5%9F%BA%E6%9C%AC%E6%B5%81%E7%A8%8B"><span class="toc-text">äº¤æ˜“åŸºæœ¬æµç¨‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%A4%E6%98%93%E5%A4%84%E7%90%86%E5%85%A5%E5%8F%A3%E5%87%BD%E6%95%B0"><span class="toc-text">äº¤æ˜“å¤„ç†å…¥å£å‡½æ•°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E4%BA%A4%E6%98%93%E5%AE%9E%E4%BE%8B"><span class="toc-text">åˆ›å»ºäº¤æ˜“å®ä¾‹</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#SendTxArgs-%E7%BB%93%E6%9E%84"><span class="toc-text">SendTxArgs ç»“æ„</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#transaction%E7%B1%BB%E5%9E%8B"><span class="toc-text">transactionç±»å‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#txdata-%E7%B1%BB%E5%9E%8B"><span class="toc-text">txdata ç±»å‹</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%A4%E6%98%93%E7%AD%BE%E5%90%8D"><span class="toc-text">äº¤æ˜“ç­¾å</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#keystore-SignTx"><span class="toc-text">keystore.SignTx</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%A8%E5%B1%80-types-signTx-%E5%AE%8C%E6%88%90%E7%AD%BE%E5%90%8D"><span class="toc-text">å…¨å±€ types.signTx å®Œæˆç­¾å</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BA%A4%E6%98%93%E6%95%A3%E5%88%97%E7%94%9F%E6%88%90"><span class="toc-text">äº¤æ˜“æ•£åˆ—ç”Ÿæˆ</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A0%B9%E6%8D%AEhash%E5%80%BC%E5%92%8C%E7%A7%81%E9%92%A5%E7%94%9F%E6%88%90%E7%AD%BE%E5%90%8D"><span class="toc-text">æ ¹æ®hashå€¼å’Œç§é’¥ç”Ÿæˆç­¾å</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A1%AB%E5%85%85%E7%AD%BE%E5%90%8D%E6%95%B0%E6%8D%AE"><span class="toc-text">å¡«å……ç­¾åæ•°æ®</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#SignatureValues"><span class="toc-text">SignatureValues</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%90%E4%BA%A4%E4%BA%A4%E6%98%93"><span class="toc-text">æäº¤äº¤æ˜“</span></a></li></ol></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-3 i,
    .toc-level-3 ol {
        display: none !important;
    }
</style>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ul>
<li>æœ¬æ–‡ä¸»è¦å‚è€ƒï¼ˆå¹¶æ ¹æ®è‡ªå·±çš„ç†è§£è¿›è¡Œæ€è·¯çš„æ¢³ç†ï¼‰<ul>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/TurkeyCock/article/details/80485391">ä»¥å¤ªåŠäº¤æ˜“æºç åˆ†æ</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/yzpbright/article/details/83538362s">GoLandå¯¼å…¥å¹¶ç¼–è¯‘ä»¥å¤ªåŠæºç go-ethereum</a></li>
<li><a target="_blank" rel="noopener" href="https://ethereum.iethpay.com/how-to-sign-and-hash-tx.html">äº¤æ˜“ç­¾åä»¥åŠå“ˆå¸Œå€¼çš„è®¡ç®—</a></li>
</ul>
</li>
</ul>
<h2 id="äº¤æ˜“å®šä¹‰"><a href="#äº¤æ˜“å®šä¹‰" class="headerlink" title="äº¤æ˜“å®šä¹‰"></a>äº¤æ˜“å®šä¹‰</h2><ul>
<li>ç”± <code>EOAï¼ˆexternally owned accountï¼‰</code>ç”Ÿæˆçš„ï¼Œç­¾è¿‡åçš„æ¶ˆæ¯</li>
<li>ä¸‡äº‹å§‹äºäº¤æ˜“ã€‚äº¤æ˜“å¯è§¦å‘ä»¥å¤ªåŠï¼ˆå…¨å±€çš„å•ä¸ªçŠ¶æ€æœºï¼‰çŠ¶æ€çš„è½¬æ¢ï¼Œè°ƒç”¨æ™ºèƒ½åˆçº¦åœ¨ <code>EVM</code> ä¸­çš„æ‰§è¡Œ</li>
</ul>
<h2 id="äº¤æ˜“åŸºæœ¬æµç¨‹"><a href="#äº¤æ˜“åŸºæœ¬æµç¨‹" class="headerlink" title="äº¤æ˜“åŸºæœ¬æµç¨‹"></a>äº¤æ˜“åŸºæœ¬æµç¨‹</h2><ul>
<li><p>å‘èµ·äº¤æ˜“ï¼šæŒ‡å®šç›®æ ‡åœ°å€å’Œäº¤æ˜“é‡‘é¢ï¼Œä»¥åŠéœ€è¦çš„ gas/gaslimitï¼Œè¿˜å¯ä»¥å¡«å…… data å­—æ®µ</p>
</li>
<li><p>äº¤æ˜“ç­¾åï¼šä½¿ç”¨è´¦æˆ·ç§é’¥å¯¹äº¤æ˜“ï¼ˆå®é™…æ˜¯äº¤æ˜“çš„ hashï¼‰è¿›è¡Œç­¾å</p>
</li>
<li><p>æäº¤äº¤æ˜“ï¼šæŠŠäº¤æ˜“åŠ å…¥åˆ°äº¤æ˜“ç¼“å†²æ±  txpool ä¸­ï¼ˆä¼šå…ˆå¯¹äº¤æ˜“ç­¾åè¿›è¡ŒéªŒè¯ï¼‰</p>
</li>
<li><p>å¹¿æ’­äº¤æ˜“ï¼šé€šçŸ¥ EVM æ‰§è¡Œï¼ŒåŒæ—¶æŠŠäº¤æ˜“ä¿¡æ¯å¹¿æ’­ç»™å…¶ä»–ç»“ç‚¹</p>
</li>
</ul>
<p><img src="https://i.loli.net/2019/12/22/MBHsouZ8PK6AGip.png" alt="transaction-execute.jpg"></p>
<h3 id="äº¤æ˜“å¤„ç†å…¥å£å‡½æ•°"><a href="#äº¤æ˜“å¤„ç†å…¥å£å‡½æ•°" class="headerlink" title="äº¤æ˜“å¤„ç†å…¥å£å‡½æ•°"></a>äº¤æ˜“å¤„ç†å…¥å£å‡½æ•°</h3><p>ç”¨æˆ·é€šè¿‡ <code>JSON RPC</code> å‘èµ· <code>eth_sendTransaction</code> è¯·æ±‚ï¼Œæœ€ç»ˆä¼šè°ƒç”¨ <code>PublicTransactionPoolAPI</code> çš„å®ç°ï¼Œä»£ç ä½äº<code> internal/ethapi/api.go</code>ã€‚</p>
<p>é¦–å…ˆæ ¹æ® <code>from</code> åœ°å€æŸ¥æ‰¾åˆ°å¯¹åº”çš„ <code>wallet</code>ã€‚æ ¹æ®å‚æ•°å€¼å»è®¾ç½®é»˜è®¤å€¼ï¼Œæ¯”å¦‚ <code>amount</code> <code>gasPrice</code>  <code>nonce</code> å­—æ®µå¯ä»¥æ²¡æœ‰è¾“å…¥ã€‚è¿˜ä¼šæ£€æŸ¥ <code>data</code> å’Œ <code>input</code> æ˜¯å¦é‡å¤è¾“å…¥ï¼Œå¹¶ä¸”ä¸ç›¸ç­‰ã€‚å¯¹å‚æ•°å€¼è¿›è¡Œæ£€æŸ¥ï¼Œå¦‚æœæ˜¯åˆ›å»ºåˆçº¦ï¼Œæ£€æŸ¥ <code>data</code>æ˜¯å¦ä¸ºç©ºã€‚</p>
<p>æ¥ç€ä¸»è¦åšäº†ä»¥ä¸‹3ä»¶äº‹ï¼š</p>
<ul>
<li><p>é€šè¿‡ <code>SendTxArgs.toTransaction() </code>åˆ›å»ºäº¤æ˜“</p>
</li>
<li><p>é€šè¿‡<code>Wallet.SignTx()</code>å¯¹äº¤æ˜“è¿›è¡Œç­¾åã€‚Walletæ˜¯ä¸€ä¸ªæ¥å£ï¼Œå…·ä½“å®ç°åœ¨ keyStoreWallet ä¸­ã€‚</p>
</li>
<li><p>é€šè¿‡<code>submitTransaction()</code>æäº¤äº¤æ˜“</p>
</li>
</ul>
<pre><code class="go">// SendTransaction creates a transaction for the given argument, sign it and submit it to the
// transaction pool.
func (s *PublicTransactionPoolAPI) SendTransaction(ctx context.Context, args SendTxArgs) (common.Hash, error) &#123;
    // Look up the wallet containing the requested signer
    account := accounts.Account&#123;Address: args.From&#125;

    wallet, err := s.b.AccountManager().Find(account)
    if err != nil &#123;
        return common.Hash&#123;&#125;, err
    &#125;

    if args.Nonce == nil &#123;
        // Hold the addresse&#39;s mutex around signing to prevent concurrent assignment of the same nonce to multiple accounts.
        s.nonceLock.LockAddr(args.From)
        defer s.nonceLock.UnlockAddr(args.From)
    &#125;

    // Set some sanity defaults and terminate on failure
    if err := args.setDefaults(ctx, s.b); err != nil &#123;
        return common.Hash&#123;&#125;, err
    &#125;
    // Assemble the transaction and sign with the wallet
    tx := args.toTransaction() //*****

    signed, err := wallet.SignTx(account, tx, s.b.ChainConfig().ChainID)//*****
    if err != nil &#123;
        return common.Hash&#123;&#125;, err
    &#125;
    return SubmitTransaction(ctx, s.b, signed)//*****
&#125;
</code></pre>
<h3 id="åˆ›å»ºäº¤æ˜“å®ä¾‹"><a href="#åˆ›å»ºäº¤æ˜“å®ä¾‹" class="headerlink" title="åˆ›å»ºäº¤æ˜“å®ä¾‹"></a>åˆ›å»ºäº¤æ˜“å®ä¾‹</h3><p>é¦–å…ˆå¤„ç†è¾“å…¥å‚æ•°çš„ <code>input/data</code> å­—æ®µï¼Œæ¨èç”¨ <code>input</code>ï¼Œ<code>data</code> æ˜¯ä¸ºäº†å‘åå…¼å®¹ã€‚</p>
<p>å¦‚æœç›®æ ‡åœ°å€ä¸ºç©ºçš„è¯ï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªåˆ›å»ºæ™ºèƒ½åˆçº¦çš„äº¤æ˜“ï¼Œè°ƒç”¨ <code>NewContractCreation()</code>ã€‚å¦åˆ™è¯´æ˜è¿™æ˜¯ä¸€ä¸ªæ™®é€šäº¤æ˜“ï¼Œè°ƒç”¨ <code>NewTransaction()</code>ã€‚ä¸ç®¡è°ƒç”¨å“ªä¸ªï¼Œæœ€ç»ˆéƒ½ä¼šç”Ÿæˆä¸€ä¸ªTransactionå®ä¾‹ï¼Œå¤„ç†å‡½æ•°æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯ <code>to</code> å‚æ•°æœ‰æ²¡æœ‰å€¼çš„åŒºåˆ«ï¼Œtransaction ç±»å‹å­—æ®µè§ä¸‹ã€‚</p>
<pre><code class="go">//ä»£ç ä½äºinternal/ethapi/api.go
func (args *SendTxArgs) toTransaction() *types.Transaction &#123;
    var input []byte
    if args.Input != nil &#123;
        input = *args.Input
    &#125; else if args.Data != nil &#123;
        input = *args.Data
    &#125;
    if args.To == nil &#123;
        return types.NewContractCreation(uint64(*args.Nonce), (*big.Int)(args.Value), uint64(*args.Gas), (*big.Int)(args.GasPrice), input)
    &#125;
    return types.NewTransaction(uint64(*args.Nonce), *args.To, (*big.Int)(args.Value), uint64(*args.Gas), (*big.Int)(args.GasPrice), input)
&#125;
</code></pre>
<h4 id="SendTxArgs-ç»“æ„"><a href="#SendTxArgs-ç»“æ„" class="headerlink" title="SendTxArgs ç»“æ„"></a>SendTxArgs ç»“æ„</h4><p>å’Œ <code>JSON</code> å­—æ®µç›¸åº”çš„ï¼ŒåŒ…æ‹¬äº†åœ°å€ã€gasã€é‡‘é¢è¿™äº›äº¤æ˜“ä¿¡æ¯ï¼Œ<code>nonce</code> æ˜¯ä¸€ä¸ªéšè´¦æˆ·äº¤æ˜“æ¬¡æ•°è‡ªå¢çš„æ•°å­—ï¼Œä¸€èˆ¬ä¼šåœ¨é»˜è®¤è®¾ç½®ä¸­è‡ªåŠ¨è·å–å¡«å……ã€‚äº¤æ˜“è¿˜å¯ä»¥æºå¸¦ä¸€äº›é¢å¤–æ•°æ®ï¼Œå­˜æ”¾åœ¨ <code>data</code> <strong>æˆ–è€…</strong> <code>input</code> å­—æ®µä¸­ã€‚</p>
<pre><code class="go">//ä»£ç ä½äºinternal/ethapi/api.go
// SendTxArgs represents the arguments to sumbit a new transaction into the transaction pool.
type SendTxArgs struct &#123;
    From     common.Address  `json:&quot;from&quot;`
    To       *common.Address `json:&quot;to&quot;`
    Gas      *hexutil.Uint64 `json:&quot;gas&quot;`
    GasPrice *hexutil.Big    `json:&quot;gasPrice&quot;`
    Value    *hexutil.Big    `json:&quot;value&quot;`
    Nonce    *hexutil.Uint64 `json:&quot;nonce&quot;`
    // We accept &quot;data&quot; and &quot;input&quot; for backwards-compatibility reasons. &quot;input&quot; is the newer name and should be preferred by clients.
    Data  *hexutil.Bytes `json:&quot;data&quot;`
    Input *hexutil.Bytes `json:&quot;input&quot;`
&#125;
</code></pre>
<h4 id="transactionç±»å‹"><a href="#transactionç±»å‹" class="headerlink" title="transactionç±»å‹"></a>transactionç±»å‹</h4><p>ä¸»è¦å°±æ˜¯åŒ…å«äº†ä¸€ä¸ª <code>txdata</code> ç±»å‹çš„å­—æ®µï¼Œå…¶ä»–3ä¸ªéƒ½æ˜¯ç¼“å­˜ã€‚</p>
<pre><code class="go">// ä»£ç ä½äº core/types/transaction.go
type Transaction struct &#123;
    data txdata
    // caches
    hash atomic.Value
    size atomic.Value
    from atomic.Value
&#125;
</code></pre>
<h4 id="txdata-ç±»å‹"><a href="#txdata-ç±»å‹" class="headerlink" title="txdata ç±»å‹"></a>txdata ç±»å‹</h4><p>ç›¸å¯¹äºè¾“å…¥å‚æ•°ä¸­çš„å­—æ®µï¼Œå¤šäº† <code>Vã€Rã€S</code> å’Œ <code>hash</code> 4 ä¸ªå­—æ®µï¼Œå°‘äº† <code>from</code> å­—æ®µã€‚&lt;v,r,s&gt;æ˜¯ç­¾ååæ‰èƒ½å¾—åˆ°çš„ï¼Œç°åœ¨ç”Ÿæˆçš„äº¤æ˜“å®ä¾‹ä¸­ä¸åŒ…å«ã€‚</p>
<p> å…¶ä»–èŠ‚ç‚¹æ”¶åˆ°äº¤æ˜“æ—¶ï¼Œé€šè¿‡ &lt;v,r,s&gt; åŠ æ¶ˆæ¯hash è®¡ç®—å‡º <code>from</code> å­—æ®µï¼Œå‚è§ <strong>äº¤æ˜“ç­¾å</strong> éƒ¨åˆ†ã€‚</p>
<pre><code class="go">// ä»£ç ä½äº core/types/transaction.go
type txdata struct &#123;
    AccountNonce uint64          `json:&quot;nonce&quot;    gencodec:&quot;required&quot;`
    Price        *big.Int        `json:&quot;gasPrice&quot; gencodec:&quot;required&quot;`
    GasLimit     uint64          `json:&quot;gas&quot;      gencodec:&quot;required&quot;`
    Recipient    *common.Address `json:&quot;to&quot;       rlp:&quot;nil&quot;` // nil means contract creation
    Amount       *big.Int        `json:&quot;value&quot;    gencodec:&quot;required&quot;`
    Payload      []byte          `json:&quot;input&quot;    gencodec:&quot;required&quot;`

    // Signature values
    V *big.Int `json:&quot;v&quot; gencodec:&quot;required&quot;`
    R *big.Int `json:&quot;r&quot; gencodec:&quot;required&quot;`
    S *big.Int `json:&quot;s&quot; gencodec:&quot;required&quot;`

    // This is only used when marshaling to JSON.
    Hash *common.Hash `json:&quot;hash&quot; rlp:&quot;-&quot;`
&#125;
</code></pre>
<h3 id="äº¤æ˜“ç­¾å"><a href="#äº¤æ˜“ç­¾å" class="headerlink" title="äº¤æ˜“ç­¾å"></a>äº¤æ˜“ç­¾å</h3><p>å…ˆé€šè¿‡ <code>Keccak-256</code> ç®—æ³•è®¡ç®—äº¤æ˜“æ•°æ®çš„ has hå€¼ï¼Œç„¶åç»“åˆè´¦æˆ·çš„ç§é’¥ï¼Œé€šè¿‡ ECDSAï¼ˆElliptic Curve Digital Signature Algorithmï¼‰ï¼Œä¹Ÿå°±æ˜¯æ¤­åœ†æ›²çº¿æ•°å­—ç­¾åç®—æ³•ç”Ÿæˆç­¾åæ•°æ®ã€‚</p>
<p><img src="https://i.loli.net/2019/12/22/X5xb6N4hMg1yDGW.png" alt="SignTx.jpg"></p>
<pre><code class="go">//ä»£ç ä½äº accounts/keystore/wallet.go
/* SignTx implements accounts.Wallet, attempting to sign the given transaction
 with the given account. If the wallet does not wrap this particular account,
 an error is returned to avoid account leakage (even though in theory we may
/be able to sign via our shared keystore backend).*/
func (w *keystoreWallet) SignTx(account accounts.Account, tx *types.Transaction, chainID *big.Int) (*types.Transaction, error) &#123;
    // Make sure the requested account is contained within
    if !w.Contains(account) &#123;
        return nil, accounts.ErrUnknownAccount
    &#125;
    // Account seems valid, request the keystore to sign
    return w.keystore.SignTx(account, tx, chainID) //*****
&#125;
</code></pre>
<p>æ’æ’­ä¸€æ¡ï¼šä»äº¤æ˜“åŸä¿¡æ¯å’Œ&lt;v,r,s&gt;ç”Ÿæˆ <code>from</code> å­—æ®µçš„ç¤ºæ„å›¾ã€‚TODOï¼šä»£ç ç¤ºä¾‹</p>
<p><img src="https://i.loli.net/2019/12/22/iaUXbWy45P91R6O.png" alt="txCalFrom.jpg"></p>
<h4 id="keystore-SignTx"><a href="#keystore-SignTx" class="headerlink" title="keystore.SignTx"></a>keystore.SignTx</h4><p>è¿™é‡Œä¼šé¦–å…ˆåˆ¤æ–­è´¦æˆ·æ˜¯å¦å·²ç»è§£é”ï¼Œå¦‚æœå·²ç»è§£é”çš„è¯å°±å¯ä»¥è·å–å®ƒçš„ç§é’¥ã€‚</p>
<p>ç„¶ååˆ›å»ºç­¾åå™¨ï¼Œå¦‚æœè¦ç¬¦åˆ EIP155 è§„èŒƒçš„è¯ï¼Œéœ€è¦æŠŠ chainID ä¼ è¿›å»ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„ â€œâ€“networkidâ€ ä»¤è¡Œå‚æ•°ã€‚</p>
<p>è°ƒç”¨ä¸€ä¸ªå…¨å±€å‡½æ•° <strong>SignTx()</strong> å®Œæˆç­¾å.</p>
<pre><code class="go">//ä»£ç ä½äº accounts/keystore/keystore.go
//SignTx signs the given transaction with the requested account.
func (ks *KeyStore) SignTx(a accounts.Account, tx *types.Transaction, chainID *big.Int) (*types.Transaction, error) &#123;
    // Look up the key to sign with and abort if it cannot be found
    ks.mu.RLock()
    defer ks.mu.RUnlock()

    unlockedKey, found := ks.unlocked[a.Address]
    if !found &#123;
        return nil, ErrLocked
    &#125;
    // Depending on the presence of the chain ID, sign with EIP155 or homestead
    if chainID != nil &#123;
        return types.SignTx(tx, types.NewEIP155Signer(chainID), unlockedKey.PrivateKey)
    &#125;
    return types.SignTx(tx, types.HomesteadSigner&#123;&#125;, unlockedKey.PrivateKey)
&#125;
</code></pre>
<h4 id="å…¨å±€-types-signTx-å®Œæˆç­¾å"><a href="#å…¨å±€-types-signTx-å®Œæˆç­¾å" class="headerlink" title="å…¨å±€ types.signTx å®Œæˆç­¾å"></a>å…¨å±€ types.signTx å®Œæˆç­¾å</h4><p>ä¸»è¦åˆ†ä¸º3ä¸ªæ­¥éª¤ï¼š</p>
<ul>
<li>ç”Ÿæˆäº¤æ˜“çš„hashå€¼</li>
<li>æ ¹æ®hashå€¼å’Œç§é’¥ç”Ÿæˆç­¾å</li>
<li>æŠŠç­¾åæ•°æ®å¡«å……åˆ°Transactionå®ä¾‹ä¸­</li>
</ul>
<pre><code class="go">//ä»£ç ä½äº core/types/transaction_signing.go
// SignTx signs the transaction using the given signer and private key
func SignTx(tx *Transaction, s Signer, prv *ecdsa.PrivateKey) (*Transaction, error) &#123;
    h := s.Hash(tx)
    sig, err := crypto.Sign(h[:], prv)
    if err != nil &#123;
        return nil, err
    &#125;
    return tx.WithSignature(s, sig)
&#125;
</code></pre>
<h5 id="äº¤æ˜“æ•£åˆ—ç”Ÿæˆ"><a href="#äº¤æ˜“æ•£åˆ—ç”Ÿæˆ" class="headerlink" title="äº¤æ˜“æ•£åˆ—ç”Ÿæˆ"></a>äº¤æ˜“æ•£åˆ—ç”Ÿæˆ</h5><pre><code class="go">//ä»£ç ä½äº core/types/transaction_signing.go
// Hash returns the hash to be signed by the sender.
// It does not uniquely identify the transaction.
func (s EIP155Signer) Hash(tx *Transaction) common.Hash &#123;
    return rlpHash([]interface&#123;&#125;&#123;
        tx.data.AccountNonce,
        tx.data.Price,
        tx.data.GasLimit,
        tx.data.Recipient,
        tx.data.Amount,
        tx.data.Payload,
        s.chainId, uint(0), uint(0),
    &#125;)
&#125;
</code></pre>
<p>å…ˆè¿›è¡ŒRLPç¼–ç ï¼ˆä¸€ç§æ•°æ®åºåˆ—åŒ–æ–¹æ³•ï¼‰ï¼Œç„¶åå†ç”¨SHA3-256ç”Ÿæˆhashå€¼ã€‚TODOï¼šRLP ç¼–ç å®ç°ã€‚</p>
<pre><code class="go">//ä»£ç ä½äº core/types/block.go
func rlpHash(x interface&#123;&#125;) (h common.Hash) &#123;
    hw := sha3.NewLegacyKeccak256()
    rlp.Encode(hw, x)
    hw.Sum(h[:0])
    return h
&#125;
</code></pre>
<h5 id="æ ¹æ®hashå€¼å’Œç§é’¥ç”Ÿæˆç­¾å"><a href="#æ ¹æ®hashå€¼å’Œç§é’¥ç”Ÿæˆç­¾å" class="headerlink" title="æ ¹æ®hashå€¼å’Œç§é’¥ç”Ÿæˆç­¾å"></a>æ ¹æ®hashå€¼å’Œç§é’¥ç”Ÿæˆç­¾å</h5><p>TODOï¼šç­¾åçš„è¿‡ç¨‹</p>
<p>é€šè¿‡ ECDSA ç®—æ³•ç”Ÿæˆç­¾åæ•°æ®ï¼Œæœ€ç»ˆä¼šè¿”å›çš„ç­¾åæ˜¯ä¸€ä¸ªå­—èŠ‚æ•°ç»„ï¼ŒæŒ‰R / S / Vçš„é¡ºåºæ’åˆ—ã€‚</p>
<pre><code class="go">//ä»£ç ä½äº crypto/signature_cgo.go
/*Sign calculates an ECDSA signature.
 This function is susceptible to chosen plaintext attacks that can leak
 information about the private key that is used for signing. Callers must
be aware that the given digest cannot be chosen by an adversery. Common
solution is to hash any input before calculating the signature.*/

// The produced signature is in the [R || S || V] format where V is 0 or 1.
func Sign(digestHash []byte, prv *ecdsa.PrivateKey) (sig []byte, err error) &#123;
    if len(digestHash) != DigestLength &#123;
        return nil, fmt.Errorf(&quot;hash is required to be exactly %d bytes (%d)&quot;, DigestLength, len(digestHash))
    &#125;
    seckey := math.PaddedBigBytes(prv.D, prv.Params().BitSize/8)
    defer zeroBytes(seckey)
    return secp256k1.Sign(digestHash, seckey)
&#125;
</code></pre>
<h5 id="å¡«å……ç­¾åæ•°æ®"><a href="#å¡«å……ç­¾åæ•°æ®" class="headerlink" title="å¡«å……ç­¾åæ•°æ®"></a>å¡«å……ç­¾åæ•°æ®</h5><p>æŠŠç­¾åæ•°æ®çš„è¿™3ä¸ªå€¼å¡«å……åˆ°Transactionç»“æ„ä¸­ã€‚</p>
<pre><code class="go">//ä»£ç ä½äº core/types/transaction.go
// WithSignature returns a new transaction with the given signature.
// This signature needs to be in the [R || S || V] format where V is 0 or 1.
func (tx *Transaction) WithSignature(signer Signer, sig []byte) (*Transaction, error) &#123;
    r, s, v, err := signer.SignatureValues(tx, sig)
    if err != nil &#123;
        return nil, err
    &#125;
    cpy := &amp;Transaction&#123;data: tx.data&#125;
    cpy.data.R, cpy.data.S, cpy.data.V = r, s, v
    return cpy, nil
&#125;
</code></pre>
<h6 id="SignatureValues"><a href="#SignatureValues" class="headerlink" title="SignatureValues"></a>SignatureValues</h6><p>ç”Ÿæˆçš„ç­¾åæ•°æ®æ˜¯å­—èŠ‚æ•°ç»„ç±»å‹ï¼Œéœ€è¦é€šè¿‡signer.SignatureValues()å‡½æ•°è½¬æ¢æˆ3ä¸ªbig.Intç±»å‹çš„æ•°æ®ï¼Œç„¶åå¡«å……åˆ°Transactionç»“æ„çš„R / S / Vå­—æ®µä¸Šã€‚</p>
<p>TODOï¼šv åˆ°åº•æ€ä¹ˆå›äº‹ï¼Œä¸€ä¼šåŠ 27ï¼Œä¸€ä¼šåŠ 35</p>
<pre><code class="go">//ä»£ç ä½äº /core/transaction_signing.go
// SignatureValues returns signature values. This signature
// needs to be in the [R || S || V] format where V is 0 or 1.
func (fs FrontierSigner) SignatureValues(tx *Transaction, sig []byte) (r, s, v *big.Int, err error) &#123;
    if len(sig) != crypto.SignatureLength &#123;
        panic(fmt.Sprintf(&quot;wrong size for signature: got %d, want %d&quot;, len(sig), crypto.SignatureLength))
    &#125;
    r = new(big.Int).SetBytes(sig[:32])
    s = new(big.Int).SetBytes(sig[32:64])
    v = new(big.Int).SetBytes([]byte&#123;sig[64] + 27&#125;)
    return r, s, v, nil
&#125;
</code></pre>
<h3 id="æäº¤äº¤æ˜“"><a href="#æäº¤äº¤æ˜“" class="headerlink" title="æäº¤äº¤æ˜“"></a>æäº¤äº¤æ˜“</h3><p>å°±çœ‹æˆ‘å‚è€ƒçš„åŸæ–‡å§ã€‚ä¸»è¦æ˜¯å‰ä¸¤ç‚¹å’Œæœ€è¿‘åšçš„ä¸œè¥¿æœ‰ç‚¹å…³ç³»ã€‚</p>

      
       <hr><span style="font-style: italic;color: gray;"> è½¬è½½è¯·æ³¨æ˜æ¥æºï¼Œæ¬¢è¿å¯¹æ–‡ç« ä¸­çš„å¼•ç”¨æ¥æºè¿›è¡Œè€ƒè¯ï¼Œæ¬¢è¿æŒ‡å‡ºä»»ä½•æœ‰é”™è¯¯æˆ–ä¸å¤Ÿæ¸…æ™°çš„è¡¨è¾¾ã€‚å¯ä»¥åœ¨ä¸‹é¢è¯„è®ºåŒºè¯„è®ºï¼Œä¹Ÿå¯ä»¥é‚®ä»¶è‡³ jaytp@qq.com </span>
    </div>
</article>


<p>
    <a  class="dashang" onclick="dashangToggle()">ğŸ’°</a>
</p>






    




    </div>
    <div class="copyright">
        <p class="footer-entry">
    Â©2016-2020 Yelog
</p>
<p class="footer-entry">Built with <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank">3-hexo</a> theme</p>

    </div>
    <div class="full-toc">
        <button class="full" data-title="åˆ‡æ¢å…¨å± å¿«æ·é”® s"><span class="min "></span></button>
<a class="" id="rocket" ></a>

    </div>
</div>

<div class="hide_box" onclick="dashangToggle()"></div>
<div class="shang_box">
    <a class="shang_close"  onclick="dashangToggle()">Ã—</a>
    <div class="shang_tit">
        <p>Help us with donation</p>
    </div>
    <div class="shang_payimg">
        <div class="pay_img">
            <img src="/img/alipay.jpg" class="alipay" title="æ‰«ç æ”¯æŒ">
            <img src="/img/weixin.jpg" class="weixin" title="æ‰«ç æ”¯æŒ">
        </div>
    </div>
    <div class="shang_payselect">
        <span><label><input type="radio" name="pay" checked value="alipay">alipay</label></span><span><label><input type="radio" name="pay" value="weixin">weixin</label></span>
    </div>
</div>


</body>
<script src="/js/jquery.pjax.js?v=1.1.0" ></script>

<script src="/js/script.js?v=1.1.0" ></script>
<script>
    var img_resize = 'default';
    function initArticle() {
        /*æ¸²æŸ“å¯¹åº”çš„è¡¨æ ¼æ ·å¼*/
        
            $("#post .pjax table").addClass("green_title");
        

        /*æ¸²æŸ“æ‰“èµæ ·å¼*/
        
        $("input[name=pay]").on("click", function () {
            if($("input[name=pay]:checked").val()=="weixin"){
                $(".shang_box .shang_payimg .pay_img").addClass("weixin_img");
            } else {
                $(".shang_box .shang_payimg .pay_img").removeClass("weixin_img");
            }
        })
        

        /*é«˜äº®ä»£ç å—è¡Œå·*/
        

        /*è®¿é—®æ•°é‡*/
        
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*ä»£ç é«˜äº®ï¼Œè¡Œå·å¯¹é½*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        
        
    }

    /*æ‰“èµé¡µé¢éšè—ä¸å±•ç¤º*/
    
    function dashangToggle() {
        $(".shang_box").fadeToggle();
        $(".hide_box").fadeToggle();
    }
    

</script>

<!--åŠ å…¥è¡Œå·çš„é«˜äº®ä»£ç å—æ ·å¼-->

<!--è‡ªå®šä¹‰æ ·å¼è®¾ç½®-->
<style>
    
    
    .nav {
        width: 542px;
    }
    .nav.fullscreen {
        margin-left: -542px;
    }
    .nav-left {
        width: 120px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 492px;
        }
        .nav.fullscreen {
            margin-left: -492px;
        }
        .nav-left {
            width: 100px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 492px;
            margin-left: -492px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #e2e0e0;
    }
    
    

    /*åˆ—è¡¨æ ·å¼*/
    

    /* èƒŒæ™¯å›¾æ ·å¼ */
    
    


    /*å¼•ç”¨å—æ ·å¼*/
    

    /*æ–‡ç« åˆ—è¡¨èƒŒæ™¯å›¾*/
    

    
</style>







</html>
